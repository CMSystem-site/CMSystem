<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.lightina.managebooks.dao.CourseMapper">
    <!--创建课程-->
    <insert id="addCourse" parameterType="CourseList">
        insert into courselist(courseName,teacherID) values (#{courselist.courseName},#{courselist.teacherID});
    </insert>

    <!--查找全部课程-->
    <select id="getlist_all" resultType="CourseList">
        select courselist.*, user.userName
        from courselist,user
        where courselist.teacherID = user.userID
    </select>

    <!--通过 课程ID 查找课程-->
    <select id="findcourseByID" resultType="CourseList" parameterType="int">
        select courselist.* , user.userName
        from courselist,user
        where courselist.teacherID = user.userID and courselist.courseID = #{courseID}
    </select>

    <!--通过 课程名称 查找课程-->
    <select id="findcourseByName" resultType="CourseList" parameterType="java.lang.String">
        select courselist.* , user.userName
        from courselist,user
        where courselist.teacherID = user.userID and courselist.courseName like CONCAT('%','${courseName}','%')
    </select>

    <!--通过 用户ID 查找课程-->
    <select id="findcourseByUserid" resultType="CourseList" parameterType="int">
        select courselist.courseID,courselist.courseName,courselist.teacherID,user.userName
        from courselist,user
        where courselist.teacherID = user.userID and courselist.teacherID = #{userID}
        UNION
        select course.courseID,course.courseName,course.teacherID,user.userName
        from course,user
        where course.teacherID = user.userID and course.studentID = #{userID}
    </select>


</mapper>